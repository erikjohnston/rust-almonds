<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="rustdoc">
    <meta name="description" content="API documentation for the Rust `Almond` struct in crate `almonds`.">
    <meta name="keywords" content="rust, rustlang, rust-lang, Almond">

    <title>almonds::Almond - Rust</title>

    <link rel="stylesheet" type="text/css" href="../main.css">

    
    
</head>
<body class="rustdoc">
    <!--[if lte IE 8]>
    <div class="warning">
        This old browser is unsupported and will most likely display funky
        things.
    </div>
    <![endif]-->

    

    <nav class="sidebar">
        
        <p class='location'><a href='index.html'>almonds</a></p><script>window.sidebarCurrent = {name: 'Almond', ty: 'struct', relpath: ''};</script><script defer src="sidebar-items.js"></script>
    </nav>

    <nav class="sub">
        <form class="search-form js-only">
            <div class="search-container">
                <input class="search-input" name="search"
                       autocomplete="off"
                       placeholder="Click or press ‘S’ to search, ‘?’ for more options…"
                       type="search">
            </div>
        </form>
    </nav>

    <section id='main' class="content struct">
<h1 class='fqn'><span class='in-band'>Struct <a href='index.html'>almonds</a>::<wbr><a class='struct' href=''>Almond</a></span><span class='out-of-band'><span id='render-detail'>
            <a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">
                [<span class='inner'>&#x2212;</span>]
            </a>
        </span><a id='src-16' class='srclink' href='../src/almonds/almond.rs.html#33-38' title='goto source code'>[src]</a></span></h1>
<pre class='rust struct'>pub struct Almond {
    // some fields omitted
}</pre><div class='docblock'><p>A representation of a deserialized Almond.</p>

<p>Every Almond consists of:</p>

<ul>
<li>A <code>generation</code>, which is a simple version to allow upgrading the caveat
formats. This is an 8-bit unsigned integer.</li>
<li>A <code>type</code>, which defines what this caveat is used for. For example,
general access vs. logging in a new client.</li>
<li>A list of caveats that each <em>decrease</em> the level of authorization the
Almond allows</li>
</ul>

<p>The type and caveats are serialized within the almond, so it is suggested
that they are not needlessly verbose.</p>

<p>A caveat is key (with optional value) that decreases the scope of the
Almond. An almond with no caveats grants full authorization to any and
all holders of the Almond. In practice, almost all almonds have at least
one caveat that scopes it to a particular user.</p>

<p>The exact format and interpretation of the caveats are application defined.</p>
</div><h2 id='methods'>Methods</h2><h3 class='impl'><code>impl <a class='struct' href='../almonds/struct.Almond.html' title='almonds::Almond'>Almond</a></code></h3><div class='impl-items'><h4 id='method.create' class='method'><code>fn <a href='#method.create' class='fnname'>create</a>(key: <a class='primitive' href='https://doc.rust-lang.org/nightly/std/primitive.slice.html'>&amp;[</a><a class='primitive' href='https://doc.rust-lang.org/nightly/std/primitive.u8.html'>u8</a><a class='primitive' href='https://doc.rust-lang.org/nightly/std/primitive.slice.html'>]</a>, generation: <a class='primitive' href='https://doc.rust-lang.org/nightly/std/primitive.u8.html'>u8</a>, almond_type: <a class='struct' href='https://doc.rust-lang.org/nightly/collections/vec/struct.Vec.html' title='collections::vec::Vec'>Vec</a>&lt;<a class='primitive' href='https://doc.rust-lang.org/nightly/std/primitive.u8.html'>u8</a>&gt;) -&gt; <a class='struct' href='../almonds/struct.Almond.html' title='almonds::Almond'>Almond</a></code></h4>
<div class='docblock'><p>Create a new Almond with given generation and type.</p>
</div><h4 id='method.parse_and_validate' class='method'><code>fn <a href='#method.parse_and_validate' class='fnname'>parse_and_validate</a>(key: <a class='primitive' href='https://doc.rust-lang.org/nightly/std/primitive.slice.html'>&amp;[</a><a class='primitive' href='https://doc.rust-lang.org/nightly/std/primitive.u8.html'>u8</a><a class='primitive' href='https://doc.rust-lang.org/nightly/std/primitive.slice.html'>]</a>, input: <a class='primitive' href='https://doc.rust-lang.org/nightly/std/primitive.slice.html'>&amp;[</a><a class='primitive' href='https://doc.rust-lang.org/nightly/std/primitive.u8.html'>u8</a><a class='primitive' href='https://doc.rust-lang.org/nightly/std/primitive.slice.html'>]</a>) -&gt; <a class='enum' href='https://doc.rust-lang.org/nightly/core/result/enum.Result.html' title='core::result::Result'>Result</a>&lt;<a class='struct' href='../almonds/struct.Almond.html' title='almonds::Almond'>Almond</a>, <a class='enum' href='../almonds/enum.AlmondParseError.html' title='almonds::AlmondParseError'>AlmondParseError</a>&gt;</code></h4>
<div class='docblock'><p>Parse a binary serialized Almond, and validate that the hashes match.</p>

<p><em>Note: This expects a binary serialization rather than base64</em></p>
</div><h4 id='method.parse_base64_and_validate' class='method'><code>fn <a href='#method.parse_base64_and_validate' class='fnname'>parse_base64_and_validate</a>(key: <a class='primitive' href='https://doc.rust-lang.org/nightly/std/primitive.slice.html'>&amp;[</a><a class='primitive' href='https://doc.rust-lang.org/nightly/std/primitive.u8.html'>u8</a><a class='primitive' href='https://doc.rust-lang.org/nightly/std/primitive.slice.html'>]</a>, input: <a class='primitive' href='https://doc.rust-lang.org/nightly/std/primitive.slice.html'>&amp;[</a><a class='primitive' href='https://doc.rust-lang.org/nightly/std/primitive.u8.html'>u8</a><a class='primitive' href='https://doc.rust-lang.org/nightly/std/primitive.slice.html'>]</a>) -&gt; <a class='enum' href='https://doc.rust-lang.org/nightly/core/result/enum.Result.html' title='core::result::Result'>Result</a>&lt;<a class='struct' href='../almonds/struct.Almond.html' title='almonds::Almond'>Almond</a>, <a class='enum' href='../almonds/enum.AlmondParseError.html' title='almonds::AlmondParseError'>AlmondParseError</a>&gt;</code></h4>
<div class='docblock'><p>Parse a Base64 serialized Almond, and validate that the hashes match.</p>
</div><h4 id='method.add_literal_caveat' class='method'><code>fn <a href='#method.add_literal_caveat' class='fnname'>add_literal_caveat</a>(&amp;mut self, caveat: <a class='struct' href='https://doc.rust-lang.org/nightly/collections/vec/struct.Vec.html' title='collections::vec::Vec'>Vec</a>&lt;<a class='primitive' href='https://doc.rust-lang.org/nightly/std/primitive.u8.html'>u8</a>&gt;) -&gt; &amp;mut Self</code></h4>
<div class='docblock'><p>Add a new literal caveat.</p>

<p>The interpretation of the caveat is either <code>&lt;key&gt;</code> or <code>&lt;key&gt; &lt;value&gt;</code>
depending on if <code>caveat</code> has a space or not.</p>
</div><h4 id='method.add_caveat' class='method'><code>fn <a href='#method.add_caveat' class='fnname'>add_caveat</a>(&amp;mut self, key: <a class='primitive' href='https://doc.rust-lang.org/nightly/std/primitive.slice.html'>&amp;[</a><a class='primitive' href='https://doc.rust-lang.org/nightly/std/primitive.u8.html'>u8</a><a class='primitive' href='https://doc.rust-lang.org/nightly/std/primitive.slice.html'>]</a>, value: <a class='enum' href='https://doc.rust-lang.org/nightly/core/option/enum.Option.html' title='core::option::Option'>Option</a>&lt;<a class='primitive' href='https://doc.rust-lang.org/nightly/std/primitive.slice.html'>&amp;[</a><a class='primitive' href='https://doc.rust-lang.org/nightly/std/primitive.u8.html'>u8</a><a class='primitive' href='https://doc.rust-lang.org/nightly/std/primitive.slice.html'>]</a>&gt;) -&gt; &amp;mut Self</code></h4>
<div class='docblock'><p>Adds a caveat.</p>

<p>The key must not include a space.</p>
</div><h4 id='method.almond_type' class='method'><code>fn <a href='#method.almond_type' class='fnname'>almond_type</a>(&amp;self) -&gt; <a class='primitive' href='https://doc.rust-lang.org/nightly/std/primitive.slice.html'>&amp;[</a><a class='primitive' href='https://doc.rust-lang.org/nightly/std/primitive.u8.html'>u8</a><a class='primitive' href='https://doc.rust-lang.org/nightly/std/primitive.slice.html'>]</a></code></h4>
<div class='docblock'><p>Get the type of the Almond</p>
</div><h4 id='method.generation' class='method'><code>fn <a href='#method.generation' class='fnname'>generation</a>(&amp;self) -&gt; <a class='primitive' href='https://doc.rust-lang.org/nightly/std/primitive.u8.html'>u8</a></code></h4>
<div class='docblock'><p>Get the generation of the Almond</p>
</div><h4 id='method.caveats' class='method'><code>fn <a href='#method.caveats' class='fnname'>caveats</a>(&amp;self) -&gt; <a class='primitive' href='https://doc.rust-lang.org/nightly/std/primitive.slice.html'>&amp;[</a><a class='struct' href='https://doc.rust-lang.org/nightly/collections/vec/struct.Vec.html' title='collections::vec::Vec'>Vec</a>&lt;<a class='primitive' href='https://doc.rust-lang.org/nightly/std/primitive.u8.html'>u8</a>&gt;<a class='primitive' href='https://doc.rust-lang.org/nightly/std/primitive.slice.html'>]</a></code></h4>
<div class='docblock'><p>Get the <em>current</em> caveats of the Almond</p>
</div><h4 id='method.hash' class='method'><code>fn <a href='#method.hash' class='fnname'>hash</a>(&amp;self) -&gt; &amp;<a class='primitive' href='https://doc.rust-lang.org/nightly/std/primitive.array.html'>[<a class='primitive' href='https://doc.rust-lang.org/nightly/std/primitive.u8.html'>u8</a>; 32]</a></code></h4>
<div class='docblock'><p>Get the <em>current</em> hash of the almond.</p>

<h1 id='safety' class='section-header'><a href='#safety'>Safety</a></h1>
<p>Do not compare this directly with other hashes. Always use a specially
designed constant time comparison function.</p>
</div><h4 id='method.serialize_binary' class='method'><code>fn <a href='#method.serialize_binary' class='fnname'>serialize_binary</a>(&amp;self) -&gt; <a class='struct' href='https://doc.rust-lang.org/nightly/collections/vec/struct.Vec.html' title='collections::vec::Vec'>Vec</a>&lt;<a class='primitive' href='https://doc.rust-lang.org/nightly/std/primitive.u8.html'>u8</a>&gt;</code></h4>
<div class='docblock'><p>Serialize into a binary blob</p>
</div><h4 id='method.serialize_base64' class='method'><code>fn <a href='#method.serialize_base64' class='fnname'>serialize_base64</a>(&amp;self) -&gt; <a class='struct' href='https://doc.rust-lang.org/nightly/collections/string/struct.String.html' title='collections::string::String'>String</a></code></h4>
<div class='docblock'><p>Serialize into Base64.</p>

<p>This is equivalent to Base64 encoding the binary serialization</p>
</div></div><h2 id='implementations'>Trait Implementations</h2><h3 class='impl'><code>impl <a class='trait' href='http://doc.rust-lang.org/rustc-serialize/rustc_serialize/base64/trait.ToBase64.html' title='rustc_serialize::base64::ToBase64'>ToBase64</a> for <a class='struct' href='../almonds/struct.Almond.html' title='almonds::Almond'>Almond</a></code></h3><div class='impl-items'><h4 id='method.to_base64' class='method'><code>fn <a href='http://doc.rust-lang.org/rustc-serialize/rustc_serialize/base64/trait.ToBase64.html#method.to_base64' class='fnname'>to_base64</a>(&amp;self, config: <a class='struct' href='http://doc.rust-lang.org/rustc-serialize/rustc_serialize/base64/struct.Config.html' title='rustc_serialize::base64::Config'>Config</a>) -&gt; <a class='struct' href='https://doc.rust-lang.org/nightly/collections/string/struct.String.html' title='collections::string::String'>String</a></code></h4>
</div></section>
    <section id='search' class="content hidden"></section>

    <section class="footer"></section>

    <aside id="help" class="hidden">
        <div>
            <h1 class="hidden">Help</h1>

            <div class="shortcuts">
                <h2>Keyboard Shortcuts</h2>

                <dl>
                    <dt>?</dt>
                    <dd>Show this help dialog</dd>
                    <dt>S</dt>
                    <dd>Focus the search field</dd>
                    <dt>&larrb;</dt>
                    <dd>Move up in search results</dd>
                    <dt>&rarrb;</dt>
                    <dd>Move down in search results</dd>
                    <dt>&#9166;</dt>
                    <dd>Go to active search result</dd>
                </dl>
            </div>

            <div class="infos">
                <h2>Search Tricks</h2>

                <p>
                    Prefix searches with a type followed by a colon (e.g.
                    <code>fn:</code>) to restrict the search to a given type.
                </p>

                <p>
                    Accepted types are: <code>fn</code>, <code>mod</code>,
                    <code>struct</code>, <code>enum</code>,
                    <code>trait</code>, <code>type</code>, <code>macro</code>,
                    and <code>const</code>.
                </p>

                <p>
                    Search functions by type signature (e.g.
                    <code>vec -> usize</code>)
                </p>
            </div>
        </div>
    </aside>

    

    <script>
        window.rootPath = "../";
        window.currentCrate = "almonds";
        window.playgroundUrl = "";
    </script>
    <script src="../jquery.js"></script>
    <script src="../main.js"></script>
    
    <script async src="../search-index.js"></script>
</body>
</html>